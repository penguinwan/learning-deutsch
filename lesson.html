<html>
<head>
<script>

</script>
</head>
<body>
	<table border="1">
		<tr><td>
	Choose a Dictionary File: <input type="file" id="fileinput" /></td>
	<tr><td><input type="button" onclick="showText()" value="Show"/>&nbsp;
	<input type="button" onclick="hideText()" value="Hide"/>&nbsp;
	<font size="24"><label id="question" style="color:white">...</label></font></td></tr>
	<tr><td><input type="button" onclick="speak()" value="Speak Again"/>&nbsp;<input type="button" onclick="nextRandom()" value="Next Speech"/></td></tr>
	</table>
	<script>
		var lines;
		var totalLine;
		var currentIndex;
		document.getElementById('fileinput').onchange = function() {
			var file = this.files[0];

			var reader = new FileReader();
			reader.onload = function(progressEvent) {
				// By lines
				lines = this.result.split('\n');
				totalLine = lines.length;
				//for(var line = 0; line < lines.length; line++){
				//  console.log(lines[line]);
				//}
			};
			reader.readAsText(file);
		}

		function speak() {
			if('speechSynthesis' in window) {
				var text = lines[currentIndex];
			    var speech = new SpeechSynthesisUtterance(text);
			    speech.lang = 'de-AT';
			    window.speechSynthesis.speak(speech);
			}
		}

		function nextRandom() {
			currentIndex = Math.floor(Math.random() * totalLine) + 0;
			speak(currentIndex);
			var text = lines[currentIndex];
		    document.getElementById("question").innerHTML = text;
		}

		function showText() {
			document.getElementById("question").style = 'color:black';
		}

		function hideText() {
			document.getElementById("question").style = 'color:white';
		}
	</script>
	</body>
</html>
